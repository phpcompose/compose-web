<?php
$this->layout = 'layout::main';
/** @var \Compose\Web\Form\Submission $form */
/** @var array<string,string> $messages */
/** @var array<string,mixed> $formConfig */

$title = $formConfig['title'] ?? 'Contact us';
$description = $formConfig['description'] ?? 'We would love to hear from you.';
$successMessage = $messages['success'] ?? 'Thanks! We received your message.';
$errorMessage = $messages['error'] ?? 'Please fix the highlighted fields.';
?>

<section class="row justify-content-center">
    <div class="col-lg-8">
        <header class="mb-4">
            <h1 class="h4 mb-0"><?= htmlspecialchars($title, ENT_QUOTES, 'UTF-8') ?></h1>
            <p class="text-muted mb-0"><?= htmlspecialchars($description, ENT_QUOTES, 'UTF-8') ?></p>
        </header>

        <div class="card shadow-sm">
            <div class="card-body">
                <?php if ($form->hasSubmissionErrors()): ?>
                    <div class="alert alert-danger">
                        <?= htmlspecialchars($form->getSubmissionErrors()[0] ?? $errorMessage, ENT_QUOTES, 'UTF-8') ?>
                    </div>
                <?php elseif ($form->isValidSubmit()): ?>
                    <div class="alert alert-success"><?= htmlspecialchars($successMessage, ENT_QUOTES, 'UTF-8') ?></div>
                <?php elseif ($form->isSubmitted() && !$form->isValid()): ?>
                    <div class="alert alert-danger"><?= htmlspecialchars($errorMessage, ENT_QUOTES, 'UTF-8') ?></div>
                <?php endif; ?>

                <?= $this->helpers->form->renderForm($form) ?>
            </div>
        </div>
    </div>
</section>
